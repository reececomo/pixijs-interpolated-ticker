{"version":3,"file":"index.mjs","sources":["../src/fps.ts","../src/ContainerInterpolator.ts","../src/InterpolatedTicker.ts"],"sourcesContent":[null,null,null],"names":["fpsCounter","options","onChange","intervalMS","precision","elapsed","frames","_fps","deltaMS","fps","Math","round","BYTES_PER_ELEMENT","Float32Array","ContainerInterpolator","constructor","cfg","this","_$count","_$prevCount","maxCapacity","_a","capacity","min","_b","propertyBytes","buffer","ArrayBuffer","bufferIndex","_$alloc","byteOffset","_$maxCapacity","_$maxDeltaAlpha","_c","maxDeltaAlpha","_$maxDeltaPosition","_d","maxDeltaPosition","_$maxDeltaRotation","_e","maxDeltaRotation","PI","_$maxDeltaScale","_f","maxDeltaScale","_$containers","Array","_$capacity","_$startPositionX","_$startPositionY","_$startRotation","_$startScaleX","_$startScaleY","_$startAlpha","_$endX","_$endY","_$endRotation","_$endScaleX","_$endScaleY","_$endAlpha","capture","target","containers","startPositionX","startPositionY","startRotation","startScaleX","startScaleY","startAlpha","captureContainers","container","depth","destroyed","isInterpolated","visible","hasInterpolatedChildren","i","console","error","_$resize","position","_x","_y","scale","rotation","alpha","children","length","j","undefined","blend","t","max","endX","endY","endRotation","endScaleX","endScaleY","endAlpha","deltaPositionX","deltaPositionY","deltaRotation","deltaScaleX","deltaScaleY","deltaAlpha","abs","set","unblend","endPositionX","endPositionY","_$allocCopy","previousArray","array","EMPTY","InterpolatedTicker","speed","_$listeners","_$renderFPS","_$minRenderMS","fixedDeltaMS","interpolation","renderer","stage","_$interpolationOptions","interpolationOptions","_$maxFrameTimeMS","maxFrameTimeMS","_$renderIntervalToleranceMS","renderIntervalToleranceMS","_$fpsIntervalMS","fpsIntervalMS","_$fpsPrecision","fpsPrecision","renderFPS","_g","started","_$rafRequestId","value","minIntervalMS","start","stop","trackdevicefps","devicefps","_$emit","trackfps","updateFn","update","prepareRenderFn","prepareRender","renderFn","render","interpolator","now","performance","then","renderthen","accumulatedMS","blendFrame","progress","frameHandler","requestAnimationFrame","elapsedMS","rendernow","renderMS","cancelAnimationFrame","on","event","fn","push","off","filter","l","args"],"mappings":"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"}