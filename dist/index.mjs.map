{"version":3,"file":"index.mjs","sources":["../src/InterpolatedTicker.ts"],"sourcesContent":[null],"names":["InterpolatedTicker","constructor","app","update","evalStart","evalEnd","beforeRender","onRender","afterRender","autoLimitAlpha","autoLimitPosition","autoLimitRotation","autoLimitScale","interpolation","updateIntervalMs","initialCapacity","this","maxUpdatesPerRender","Math","PI","_previousTime","_accumulator","_started","_speed","_maxRenderFPS","_maxRenderIntervalMs","_idxContainersCount","_prevIdxContainersCount","_maxIdx","_releasedIdx","_app","_targetUpdateIntervalMs","_updateIntervalMs","capacity","_capacity","_idxContainers","Array","propBytes","Float32Array","BYTES_PER_ELEMENT","memoryNeeded","_buffer","ArrayBuffer","i","allocate","_prevX","_prevY","_prevRotation","_prevScaleX","_prevScaleY","_prevAlpha","_shadowX","_shadowY","_shadowRotation","_shadowScaleX","_shadowScaleY","_shadowAlpha","speed","value","maxRenderFPS","started","start","loop","performance","now","renderDelta","requestAnimationFrame","_a","call","min","_captureContainers","_b","_c","_interpolateContainers","_d","renderer","render","stage","_restoreContainers","_e","_f","stop","getDefaultInterpolation","container","_resizeBuffer","newCapacity","newBuffer","allocateAndCopy","oldArray","newArray","set","_captureContainersTraverseSubtree","_markReleased","undefined","destroyed","index","_interpIdx","pop","position","_x","_y","scale","rotation","alpha","children","interpolatedChildren","length","accumulated","rawFactor","factor","wrapConfig","interpolationWraparound","dx","dy","xrange","xRange","yrange","yRange","abs","scaleDx","scaleDy","rotationDelta","alphaDelta","push"],"mappings":"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"}