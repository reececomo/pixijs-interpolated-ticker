{"version":3,"file":"index.cjs","sources":["../src/fps.ts","../src/ContainerInterpolator.ts","../src/InterpolatedTicker.ts"],"sourcesContent":[null,null,null],"names":["fpsCounter","options","onChange","intervalMS","precision","elapsed","frames","_fps","deltaMS","fps","Math","round","BYTES_PER_ELEMENT","Float32Array","ContainerInterpolator","constructor","cfg","this","_$count","_$prevCount","maxCapacity","_a","capacity","min","_b","propertyBytes","buffer","ArrayBuffer","bufferIndex","_$alloc","byteOffset","_$maxCapacity","_$maxDeltaAlpha","_c","maxDeltaAlpha","_$maxDeltaPosition","_d","maxDeltaPosition","_$maxDeltaRotation","_e","maxDeltaRotation","PI","_$maxDeltaScale","_f","maxDeltaScale","_$containers","Array","_$capacity","_$startPositionX","_$startPositionY","_$startRotation","_$startScaleX","_$startScaleY","_$startAlpha","_$endX","_$endY","_$endRotation","_$endScaleX","_$endScaleY","_$endAlpha","capture","target","containers","startPositionX","startPositionY","startRotation","startScaleX","startScaleY","startAlpha","captureContainers","container","depth","destroyed","isInterpolated","visible","culled","hasInterpolatedChildren","i","console","error","_$resize","position","_x","_y","scale","rotation","alpha","children","length","j","undefined","blend","t","max","endX","endY","endRotation","endScaleX","endScaleY","endAlpha","deltaPositionX","deltaPositionY","deltaRotation","deltaScaleX","deltaScaleY","deltaAlpha","abs","set","unblend","endPositionX","endPositionY","_$allocCopy","previousArray","array","EMPTY","InterpolatedTicker","speed","_$listeners","_$renderFPS","_$minRenderMS","fixedDeltaMS","interpolation","renderer","stage","_$interpolationOptions","interpolationOptions","_$maxFrameTimeMS","maxFrameTimeMS","_$renderIntervalToleranceMS","renderIntervalToleranceMS","_$fpsIntervalMS","fpsIntervalMS","_$fpsPrecision","fpsPrecision","renderFPS","_g","started","_$rafRequestId","value","minIntervalMS","start","hooks","stop","updateFn","update","prepareRenderFn","prepareRender","renderFn","render","postRenderFn","postRender","trackDeviceFPS","devicefps","_$emit","trackFPS","interpolator","now","performance","then","renderthen","accumulatedMS","blendFrame","progress","frameHandler","requestAnimationFrame","elapsedMS","rendernow","renderMS","cancelAnimationFrame","on","event","fn","push","off","filter","l","args"],"mappings":"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"}