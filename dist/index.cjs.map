{"version":3,"file":"index.cjs","sources":["../src/events.ts","../src/fps.ts","../src/ContainerInterpolator.ts","../src/InterpolatedTicker.ts"],"sourcesContent":[null,null,null,null],"names":["Emits","constructor","this","_listeners","on","key","fn","_a","_b","push","off","filter","l","emit","args","fpsCounter","options","onChange","intervalMS","precision","elapsed","frames","_fps","deltaMS","fps","Math","round","ContainerInterpolator","capacity","maxCapacity","maxDeltaPosition","maxDeltaScale","maxDeltaRotation","PI","maxDeltaAlpha","_count","_prevCount","_maxCapacity","_maxDeltaAlpha","_maxDeltaPosition","_maxDeltaRotation","_maxDeltaScale","_capacity","_containers","Array","propertyBytes","Float32Array","BYTES_PER_ELEMENT","totalBytes","_buffer","ArrayBuffer","bufferIndex","allocate","byteOffset","_startX","_startY","_startRotation","_startScaleX","_startScaleY","_startAlpha","_endX","_endY","_endRotation","_endScaleX","_endScaleY","_endAlpha","capture","target","containers","startX","startY","startRotation","startScaleX","startScaleY","startAlpha","captureContainers","container","depth","destroyed","isInterpolated","visible","hasInterpolatedChildren","_c","i","console","error","_resizeCapacity","position","_x","_y","scale","rotation","alpha","children","length","j","undefined","blend","t","min","max","endX","endY","endRotation","endScaleX","endScaleY","endAlpha","deltaX","deltaY","deltaRotation","deltaScaleX","deltaScaleY","deltaAlpha","abs","set","unblend","buffer","allocateFrom","previousArray","array","EMPTY","InterpolatedTicker","super","speed","_renderFPS","_minRenderMS","fixedDeltaMS","interpolation","_renderer","renderer","_stage","stage","_interpolationOptions","interpolationOptions","_maxFrameTimeMS","maxFrameTimeMS","_renderIntervalToleranceMS","_d","renderIntervalToleranceMS","_fpsIntervalMS","_e","fpsIntervalMS","_fpsPrecision","_f","fpsPrecision","renderFPS","_g","started","_rafRequestId","value","minIntervalMS","start","stop","trackdevicefps","devicefps","trackfps","updateFn","update","prepareRenderFn","prepareRender","renderFn","render","interpolator","now","performance","then","renderthen","accumulatedMS","blendFrame","progress","frameHandler","requestAnimationFrame","elapsedMS","rendernow","renderMS","cancelAnimationFrame"],"mappings":"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"}